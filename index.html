<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Cuenca Visas | Expert Assistance for Expats</title>
    <meta name="description" content="Cuenca Visas provides expert visa and immigration services for expats. We help with residency, temporary, and permanent visas. Get a free consultation today!">
    <meta name="keywords" content="cuenca visas, ecuador visa, expat visa, residency visa, temporary visa, permanent visa, visa assistance, immigration ecuador">

    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

    <script src="https://unpkg.com/lucide@latest"></script>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "LocalBusiness",
      "name": "Cuenca Visas",
      "image": "https://www.cuencavisas.com/images/cuenca-visas-logo.png",
      "url": "https://www.cuencavisas.com",
      "telephone": "+5930962848410",
      "priceRange": "$$$",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "Cuenca",
        "addressRegion": "Azuay",
        "postalCode": "010101",
        "addressCountry": "EC"
      },
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": -2.8974,
        "longitude": -79.0045
      },
      "openingHoursSpecification": {
        "@type": "OpeningHoursSpecification",
        "dayOfWeek": [
          "Monday",
          "Tuesday",
          "Wednesday",
          "Thursday",
          "Friday"
        ],
        "opens": "08:00",
        "closes": "17:00"
      },
      "sameAs": [
        "https://facebook.com/cuencavisas",
        "https://www.instagram.com/cuencavisas"
      ]
    }
    </script>

    <style>
        /* Use the Poppins font */
        body {
            font-family: 'Poppins', sans-serif;
        }
        /* Style for the hero background image */
        .hero-bg {
            background-image: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('images/hero-background-visas.png');
            background-size: cover;
            background-position: center;
        }
        /* Simple transition for the popup */
        #email-popup {
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
        }
    </style>
</head>

<body class="bg-gray-50 text-gray-800">

    <header class="bg-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-2xl font-bold text-blue-700">Cuenca Visas</a>
            <div class="hidden md:flex space-x-6 items-center">
                <a href="#visa-types" class="text-gray-600 hover:text-blue-700 font-medium">Visa Types</a>
                <a href="#about" class="text-gray-600 hover:text-blue-700 font-medium">About Us</a>
                <a href="#testimonials" class="text-gray-600 hover:text-blue-700 font-medium">Testimonials</a>
                <a href="#gallery" class="text-gray-600 hover:text-blue-700 font-medium">Success Stories</a>
                <a href="#blog" class="text-gray-600 hover:text-blue-700 font-medium">Resources</a>
                <a href="#contact" class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-4 rounded-full transition duration-300">Get a Free Consultation</a>
            </div>
            <button id="mobile-menu-button" class="md:hidden">
                <i data-lucide="menu" class="w-6 h-6"></i>
            </button>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4 space-y-2">
            <a href="#visa-types" class="block text-gray-600 hover:text-blue-700 font-medium">Visa Types</a>
            <a href="#about" class="block text-gray-600 hover:text-blue-700 font-medium">About Us</a>
            <a href="#testimonials" class="block text-gray-600 hover:text-blue-700 font-medium">Testimonials</a>
            <a href="#gallery" class="block text-gray-600 hover:text-blue-700 font-medium">Success Stories</a>
            <a href="#blog" class="block text-gray-600 hover:text-blue-700 font-medium">Resources</a>
            <a href="#contact" class="block bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-4 rounded-full transition duration-300 text-center mt-2">Get a Free Consultation</a>
        </div>
    </header>

    <main>

        <section id="home" class="hero-bg text-white h-[90vh] flex items-center justify-center text-center">
            <div class="container mx-auto px-6">
                <h1 class="text-4xl md:text-6xl font-bold mb-4 leading-tight">The Easiest Way to Get Your Ecuador Visa.</h1>
                <p class="text-lg md:text-xl mb-8 max-w-3xl mx-auto">Expert, trustworthy visa services for expats in Cuenca. We provide clear guidance for a smooth, stress-free journey to residency.</p>
                <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
                    <a href="#calculator" class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-5 px-10 rounded-full transition duration-300 flex items-center gap-2 w-full sm:w-auto justify-center text-xl">
                        <i data-lucide="check-circle" class="w-6 h-6"></i>
                        Check My Visa Eligibility
                    </a>
                    <a href="#contact" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-5 px-10 rounded-full transition duration-300 w-full sm:w-auto text-xl text-center">
                        Get a Free Consultation
                    </a>
                </div>
            </div>
        </section>

        <section id="calculator" class="py-20 bg-gray-100">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-3xl md:text-4xl font-bold mb-4">Find Your Path to Ecuador ðŸ‡ªðŸ‡¨</h2>
                <p class="text-gray-600 mb-8 max-w-2xl mx-auto">Answer a few quick questions to see which visa you may be eligible for.</p>

                <div id="calculator-container" class="max-w-xl mx-auto bg-white p-8 rounded-lg shadow-lg">

                    <div id="step-1" class="step-content" data-step="1">
                        <p class="text-xl font-semibold mb-4">1 of 4: What is your country of citizenship?</p>
                        <select id="country-select" class="w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none text-gray-700">
                            <option value="" disabled selected>Select a country</option>
                            <option value="us">United States</option>
                            <option value="ca">Canada</option>
                            <option value="gb">United Kingdom</option>
                            <option value="au">Australia</option>
                            <option value="other">Other</option>
                        </select>
                        <button class="action-button next-button mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full transition duration-300" data-action="next">Next</button>
                    </div>

                    <div id="step-2" class="step-content hidden" data-step="2">
                        <p class="text-xl font-semibold mb-4">2 of 4: Do you have a pension or a stable, verifiable monthly income from a foreign source?</p>
                        <div class="space-y-4">
                            <button class="action-button answer-button w-full px-4 py-3 border border-gray-300 rounded-md transition duration-200 hover:bg-gray-100" data-action="next" data-answer="income-yes">Yes</button>
                            <button class="action-button answer-button w-full px-4 py-3 border border-gray-300 rounded-md transition duration-200 hover:bg-gray-100" data-action="next" data-answer="income-no">No</button>
                        </div>
                        <button class="action-button back-button mt-6 w-full bg-gray-400 hover:bg-gray-500 text-white font-bold py-3 px-8 rounded-full transition duration-300" data-action="back">Back</button>
                    </div>

                    <div id="step-3" class="step-content hidden" data-step="3">
                        <p class="text-xl font-semibold mb-4">3 of 4: Do you have a professional degree (e.g., Bachelor's, Master's)?</p>
                        <div class="space-y-4">
                            <button class="action-button answer-button w-full px-4 py-3 border border-gray-300 rounded-md transition duration-200 hover:bg-gray-100" data-action="next" data-answer="degree-yes">Yes</button>
                            <button class="action-button answer-button w-full px-4 py-3 border border-gray-300 rounded-md transition duration-200 hover:bg-gray-100" data-action="next" data-answer="degree-no">No</button>
                        </div>
                        <button class="action-button back-button mt-6 w-full bg-gray-400 hover:bg-gray-500 text-white font-bold py-3 px-8 rounded-full transition duration-300" data-action="back">Back</button>
                    </div>

                    <div id="step-4" class="step-content hidden" data-step="4">
                        <p class="text-xl font-semibold mb-4">4 of 4: Are you interested in investing in Ecuador (e.g., property, bank CD)?</p>
                        <div class="space-y-4">
                            <button class="action-button answer-button w-full px-4 py-3 border border-gray-300 rounded-md transition duration-200 hover:bg-gray-100" data-action="next" data-answer="investment-yes">Yes</button>
                            <button class="action-button answer-button w-full px-4 py-3 border border-gray-300 rounded-md transition duration-200 hover:bg-gray-100" data-action="next" data-answer="investment-no">No</button>
                        </div>
                        <button class="action-button back-button mt-6 w-full bg-gray-400 hover:bg-gray-500 text-white font-bold py-3 px-8 rounded-full transition duration-300" data-action="back">Back</button>
                    </div>

                    <div id="results" class="step-content hidden" data-step="5">
                        <h3 id="result-text" class="text-3xl font-bold mb-4 text-blue-700"></h3>
                        <p id="result-description" class="text-gray-600 mb-6"></p>

                        <div class="bg-blue-50 p-6 rounded-lg shadow-inner">
                            <h4 class="text-xl font-bold mb-2">Want to know for sure?</h4>
                            <p class="text-gray-700 mb-4">Get a Free Detailed Visa Checklist sent directly to your inbox!</p>
                            <form id="visa-lead-form">
                                <input type="hidden" name="access_key" value="8c93c84e-bab1-46bf-8500-06e7fd5c053c">
                                <input type="hidden" name="subject" value="New Visa Calculator Lead">
                                <input type="text" name="email" placeholder="Your Email Address" class="w-full px-4 py-2 border border-gray-300 rounded-md mb-3 focus:ring-2 focus:ring-blue-500 focus:outline-none" required>
                                <input type="text" name="phone" placeholder="Your WhatsApp" class="w-full px-4 py-2 border border-gray-300 rounded-md mb-4 focus:ring-2 focus:ring-blue-500 focus:outline-none">
                                <button type="submit" class="w-full bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-3 px-8 rounded-full transition duration-300">Get Your Free Checklist</button>
                            </form>
                        </div>

                        <button class="action-button start-over-button mt-6 text-gray-600 hover:text-blue-700 font-semibold" data-action="start-over">Start Over</button>
                    </div>
                </div>
            </div>
        </section>
        <section id="value-prop" class="py-20">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-3xl font-bold mb-12">The Cuenca Visas Difference: Why You Can Trust Us</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                    <div class="flex flex-col items-center">
                        <div class="bg-blue-100 rounded-full w-20 h-20 flex items-center justify-center shadow-lg mb-4">
                            <i data-lucide="message-square" class="text-blue-600 w-10 h-10"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-2">Clarity & Simplicity</h3>
                        <p class="text-gray-600">We make the visa process simple and stress-free by explaining every step in clear English, with no legal jargon.</p>
                    </div>
                    <div class="flex flex-col items-center">
                        <div class="bg-blue-100 rounded-full w-20 h-20 flex items-center justify-center shadow-lg mb-4">
                            <i data-lucide="shield-check" class="text-blue-600 w-10 h-10"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-2">Trust & Security</h3>
                        <p class="text-gray-600">You will work with a vetted, reputable professional. Our partners are the most trusted legal experts in the community.</p>
                    </div>
                    <div class="flex flex-col items-center">
                        <div class="bg-blue-100 rounded-full w-20 h-20 flex items-center justify-center shadow-lg mb-4">
                            <i data-lucide="piggy-bank" class="text-blue-600 w-10 h-10"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-2">Cost Savings</h3>
                        <p class="text-gray-600">Avoid overpaying with our transparent pricing models. We connect you with professionals who provide all-inclusive, no-surprise fees.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="services-pricing" class="py-20 bg-white">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-3xl font-bold mb-2">Our Services & Pricing</h2>
                <p class="text-gray-600 mb-8 max-w-2xl mx-auto">We connect you with trusted experts who handle a variety of visa and legal matters with transparent, all-inclusive pricing.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                    <div class="bg-gray-50 p-8 rounded-lg shadow-lg">
                        <h3 class="text-xl font-bold mb-2">Pensioner Visas</h3>
                        <p class="text-gray-600">Expert assistance for those who have a secure income from a foreign pension or social security to retire in Ecuador.</p>
                    </div>
                    <div class="bg-gray-50 p-8 rounded-lg shadow-lg">
                        <h3 class="text-xl font-bold mb-2">Professional Visas</h3>
                        <p class="text-gray-600">Guidance for professionals seeking to live and work in Ecuador based on a degree or professional title.</p>
                    </div>
                    <div class="bg-gray-50 p-8 rounded-lg shadow-lg">
                        <h3 class="text-xl font-bold mb-2">Digital Nomad Visas</h3>
                        <p class="text-gray-600">Seamless help for remote workers to acquire the new visa that allows them to live and work from Cuenca.</p>
                    </div>
                    <div class="bg-gray-50 p-8 rounded-lg shadow-lg">
                        <h3 class="text-xl font-bold mb-2">Investor Visas</h3>
                        <p class="text-gray-600">For individuals who wish to invest in Ecuador, we can help you navigate the process of obtaining an investor visa.</p>
                    </div>
                </div>
            </div>
        </div>
        </section>

        <section id="social-proof" class="py-20 bg-gray-100">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-3xl font-bold mb-2">Trusted by the Cuenca Expat Community</h2>
                <p class="text-gray-600 mb-12 max-w-2xl mx-auto">Our partners are vetted professionals with years of experience and a track record of success.</p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-left">
                    <div class="bg-white p-8 rounded-lg shadow-lg">
                        <p class="text-gray-600 mb-4">"Cuenca Visas made the whole process simple. They spoke perfect English and handled everything professionally. I highly recommend them!"</p>
                        <p class="font-bold text-gray-800">- Sarah K.</p>
                        <p class="text-sm text-gray-500">El Centro, Cuenca</p>
                    </div>
                    <div class="bg-white p-8 rounded-lg shadow-lg">
                        <p class="text-gray-600 mb-4">"After a friend's recommendation, I used a Cuenca Visas referral to help with my temporary visa. They were honest, reliable, and kept me informed at all times. It was a smooth experience."</p>
                        <p class="font-bold text-gray-800">- David L.</p>
                        <p class="text-sm text-gray-500">Puertas del Sol</p>
                    </div>
                    <div class="bg-white p-8 rounded-lg shadow-lg">
                        <p class="text-gray-600 mb-4">"The team at Cuenca Visas is a lifesaver. They helped me with a tricky visa renewal and were fair with their pricing. I wouldn't go to anyone else for my visa needs."</p>
                        <p class="font-bold text-gray-800">- Brenda M.</p>
                        <p class="text-sm text-gray-500">Gringolandia</p>
                    </div>
                </div>
                <div class="mt-12">
                    <p class="text-gray-600 font-bold mb-4">As Featured On:</p>
                    <div class="flex justify-center items-center space-x-6">
                        <span class="text-2xl font-bold text-blue-800">GringoPost</span>
                        <span class="text-2xl font-bold text-gray-700">InterNations</span>
                        </div>
                </div>
            </div>
        </section>

        <section id="about" class="py-20 bg-white">
            <div class="container mx-auto px-6 grid md:grid-cols-2 gap-12 items-center">
                <div>
                    <img src="images/your-team-photo.png" alt="Photo of the Cuenca Visas team" class="rounded-lg shadow-xl w-full">
                </div>
                <div>
                    <h2 class="text-3xl font-bold mb-4">Your Partner in Cuenca, Here to Help.</h2>
                    <p class="text-gray-600 mb-4 text-lg">As an expat myself, I understand the unique challenges of navigating a new country's bureaucracy. You need a trusted partner who can provide clear, legal guidance in English and handle the complexities for you.</p>
                    <p class="text-gray-600 mb-4">You may know me as the owner of Handyman Cuenca; my promise to you is the same: clarity and peace of mind. My mission is to simplify the visa process so you can focus on what matters most: enjoying your new life in Ecuador.</p>
                    <p class="text-gray-700 font-semibold text-lg">My promise to you is simple: I'll provide honest, transparent service and work diligently to ensure a successful outcome.</p>
                </div>
            </div>
        </section>

        <section id="contact-form-section" class="py-20 bg-gray-200">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-3xl font-bold mb-2">Ready to Start Your New Life in Ecuador?</h2>
                <p class="text-gray-600 mb-8 max-w-2xl mx-auto">The fastest way to get your visa questions answered is to schedule a free consultation. Don't delay your move to Ecuadorâ€”contact us today to get started!</p>
                <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
                    <a href="https://wa.me/5930962848410?text=Hi,%20I'd%20like%20to%20get%20a%20free%20visa%20consultation." target="_blank" class="bg-green-500 hover:bg-green-600 text-white font-bold py-4 px-10 rounded-full transition duration-300 flex items-center gap-2 w-full sm:w-auto justify-center text-xl">
                         <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-message-circle"><path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"/></svg>
                        WhatsApp: +593-96-284-8410
                    </a>
                </div>
<div class="mt-12 text-gray-600">
                    <p class="font-semibold">Office Hours:</p>
                    <p>Monday - Friday: 8:00 AM - 5:00 PM</p>
                    <p>Saturday: 9:00 AM - 1:00 PM</p>
                    <p class="mt-4 font-semibold">Providing professional visa and immigration services in Cuenca, Ecuador.</p>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-6 text-center">
            <p>&copy; 2025 Cuenca Visas. All rights reserved.</p>
            <p class="text-sm text-gray-400 mt-2">Professional visa services for expats in Cuenca.</p>
            <div class="flex justify-center space-x-4 mt-4">
                <a href="https://facebook.com/cuencavisas" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-white transition-colors">
                    <i data-lucide="facebook" class="w-6 h-6"></i>
                </a>
                <a href="https://www.instagram.com/cuencavisas" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-white transition-colors">
                    <i data-lucide="instagram" class="w-6 h-6"></i>
                </a>
            </div>
        </div>
    </footer>
<script>
        // --- Mobile Menu Toggle ---
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');

        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // --- Email Capture Pop-up Logic ---
        const emailPopup = document.getElementById('email-popup');
        const closePopupButton = document.getElementById('close-popup');

        // Function to show the popup
        const showPopup = () => {
            if (sessionStorage.getItem('popupClosed') !== 'true') {
                emailPopup.classList.remove('hidden');
                setTimeout(() => {
                    emailPopup.classList.remove('opacity-0', '-translate-y-4');
                }, 10); // small delay to allow transition
            }
        };

        // Function to close the popup
        const closePopup = () => {
            sessionStorage.setItem('popupClosed', 'true');
            emailPopup.classList.add('opacity-0', '-translate-y-4');
             setTimeout(() => {
                emailPopup.classList.add('hidden');
            }, 300); // match transition duration
        };

        // Show popup after 7 seconds
        setTimeout(showPopup, 7000);

        // Event listeners
        closePopupButton.addEventListener('click', closePopup);
        
        // Close when clicking outside the modal content
        emailPopup.addEventListener('click', (e) => {
            if (e.target === emailPopup) {
                closePopup();
            }
        });
        
        // --- Visa Eligibility Calculator Logic ---
        const calculatorContainer = document.getElementById('calculator-container');
        const steps = document.querySelectorAll('.step-content');
        const countrySelect = document.getElementById('country-select');

        let state = {
            currentStep: 1,
            answers: {
                citizenship: '',
                income: null,
                degree: null,
                investment: null
            }
        };

        function updateUI() {
            steps.forEach(step => {
                const stepNumber = parseInt(step.dataset.step);
                if (stepNumber === state.currentStep) {
                    step.classList.remove('hidden');
                } else {
                    step.classList.add('hidden');
                }
            });
        }

        function determineResult() {
            const resultText = document.getElementById('result-text');
            const resultDesc = document.getElementById('result-description');

            let result = "Based on your answers, you may be eligible for a ";

            if (state.answers.income) {
                result += "Pensioner Visa!";
                resultDesc.textContent = "This visa is for individuals who have a guaranteed, stable monthly income from a foreign source (like a pension or social security).";
            } else if (state.answers.degree) {
                result += "Professional Visa!";
                resultDesc.textContent = "If you have a professional degree, this visa could be your path to residency, allowing you to live and work in Ecuador.";
            } else if (state.answers.investment) {
                result += "Investor Visa!";
                resultDesc.textContent = "Investing in Ecuador (e.g., in real estate or a Certificate of Deposit) is a great way to secure your residency.";
            } else {
                result = "Based on your answers, your eligibility is not immediately clear. Please contact us for a free consultation.";
                resultDesc.textContent = "Don't worry! There are other visa options available. We can review your specific situation and guide you to the right solution.";
            }

            resultText.textContent = result;
        }

        calculatorContainer.addEventListener('click', (event) => {
            const target = event.target;
            const action = target.dataset.action;

            if (!action) return; // Exit if the clicked element has no data-action attribute

            switch (action) {
                case 'next':
                    if (state.currentStep === 1) {
                        const country = countrySelect.value;
                        if (country) {
                            state.answers.citizenship = country;
                            state.currentStep = 2;
                        } else {
                            // Optionally, provide user feedback if no country is selected
                            alert('Please select your country of citizenship.');
                        }
                    } else if (state.currentStep === 2) {
                        const answer = target.dataset.answer;
                        state.answers.income = (answer === 'income-yes');
                        state.currentStep = 3;
                    } else if (state.currentStep === 3) {
                        const answer = target.dataset.answer;
                        state.answers.degree = (answer === 'degree-yes');
                        state.currentStep = 4;
                    } else if (state.currentStep === 4) {
                        const answer = target.dataset.answer;
                        state.answers.investment = (answer === 'investment-yes');
                        state.currentStep = 5;
                        determineResult();
                    }
                    break;
                case 'back':
                    state.currentStep--;
                    break;
                case 'start-over':
                    state = {
                        currentStep: 1,
                        answers: {
                            citizenship: '',
                            income: null,
                            degree: null,
                            investment: null
                        }
                    };
                    countrySelect.value = ''; // Reset the select dropdown
                    break;
            }

            updateUI();
        });

        // Initialize UI on page load
        updateUI();

        // Handle form submission via Web3Forms
        const visaLeadForm = document.getElementById('visa-lead-form');
        visaLeadForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Web3Forms Access Key
            const accessKey = "8c93c84e-bab1-46bf-8500-06e7fd5c053c";
            
            const formData = new FormData(this);
            const data = Object.fromEntries(formData.entries());
            data['calculator_results'] = JSON.stringify(state.answers);

            fetch("https://api.web3forms.com/submit", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "Accept": "application/json"
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert("Thank you! Your free checklist is on its way. We'll be in touch soon!");
                    visaLeadForm.reset();
                } else {
                    alert("Something went wrong. Please try again or contact us directly.");
                }
            })
            .catch(error => {
                console.error('Error submitting form:', error);
                alert("Something went wrong. Please try again or contact us directly.");
            });
        });
        
        // --- Initialize Lucide Icons ---
        lucide.createIcons();
    </script>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- Mobile Menu Toggle ---
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');

        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // --- Email Capture Pop-up Logic ---
        const emailPopup = document.getElementById('email-popup');
        const closePopupButton = document.getElementById('close-popup');

        // Function to show the popup
        const showPopup = () => {
            if (sessionStorage.getItem('popupClosed') !== 'true') {
                emailPopup.classList.remove('hidden');
                setTimeout(() => {
                    emailPopup.classList.remove('opacity-0', '-translate-y-4');
                }, 10); // small delay to allow transition
            }
        };

        // Function to close the popup
        const closePopup = () => {
            sessionStorage.setItem('popupClosed', 'true');
            emailPopup.classList.add('opacity-0', '-translate-y-4');
            setTimeout(() => {
                emailPopup.classList.add('hidden');
            }, 300); // match transition duration
        };

        // Show popup after 7 seconds
        setTimeout(showPopup, 7000);

        // Event listeners
        if (closePopupButton) {
            closePopupButton.addEventListener('click', closePopup);
        }
        
        // Close when clicking outside the modal content
        if (emailPopup) {
            emailPopup.addEventListener('click', (e) => {
                if (e.target === emailPopup) {
                    closePopup();
                }
            });
        }
        
        // --- Visa Eligibility Calculator Logic ---
        const calculatorContainer = document.getElementById('calculator-container');
        const steps = document.querySelectorAll('.step-content');
        const countrySelect = document.getElementById('country-select');

        let state = {
            currentStep: 1,
            answers: {
                citizenship: '',
                income: null,
                degree: null,
                investment: null
            }
        };

        function updateUI() {
            steps.forEach(step => {
                const stepNumber = parseInt(step.dataset.step);
                if (stepNumber === state.currentStep) {
                    step.classList.remove('hidden');
                } else {
                    step.classList.add('hidden');
                }
            });
        }

        function determineResult() {
            const resultText = document.getElementById('result-text');
            const resultDesc = document.getElementById('result-description');

            let result = "Based on your answers, you may be eligible for a ";

            if (state.answers.income) {
                result += "Pensioner Visa!";
                resultDesc.textContent = "This visa is for individuals who have a guaranteed, stable monthly income from a foreign source (like a pension or social security).";
            } else if (state.answers.degree) {
                result += "Professional Visa!";
                resultDesc.textContent = "If you have a professional degree, this visa could be your path to residency, allowing you to live and work in Ecuador.";
            } else if (state.answers.investment) {
                result += "Investor Visa!";
                resultDesc.textContent = "Investing in Ecuador (e.g., in real estate or a Certificate of Deposit) is a great way to secure your residency.";
            } else {
                result = "Based on your answers, your eligibility is not immediately clear. Please contact us for a free consultation.";
                resultDesc.textContent = "Don't worry! There are other visa options available. We can review your specific situation and guide you to the right solution.";
            }

            resultText.textContent = result;
        }
        
        if (calculatorContainer) {
            calculatorContainer.addEventListener('click', (event) => {
                const target = event.target;
                const action = target.dataset.action;

                if (!action) return; // Exit if the clicked element has no data-action attribute

                switch (action) {
                    case 'next':
                        if (state.currentStep === 1) {
                            const country = countrySelect.value;
                            if (country) {
                                state.answers.citizenship = country;
                                state.currentStep = 2;
                            } else {
                                // Provide user feedback if no country is selected
                                alert('Please select your country of citizenship.');
                            }
                        } else if (state.currentStep === 2) {
                            const answer = target.dataset.answer;
                            state.answers.income = (answer === 'income-yes');
                            state.currentStep = 3;
                        } else if (state.currentStep === 3) {
                            const answer = target.dataset.answer;
                            state.answers.degree = (answer === 'degree-yes');
                            state.currentStep = 4;
                        } else if (state.currentStep === 4) {
                            const answer = target.dataset.answer;
                            state.answers.investment = (answer === 'investment-yes');
                            state.currentStep = 5;
                            determineResult();
                        }
                        break;
                    case 'back':
                        state.currentStep--;
                        break;
                    case 'start-over':
                        state = {
                            currentStep: 1,
                            answers: {
                                citizenship: '',
                                income: null,
                                degree: null,
                                investment: null
                            }
                        };
                        countrySelect.value = ''; // Reset the select dropdown
                        break;
                }

                updateUI();
            });
        }

        // Initialize UI on page load
        updateUI();

        // Handle form submission via Web3Forms
        const visaLeadForm = document.getElementById('visa-lead-form');
        if (visaLeadForm) {
            visaLeadForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Web3Forms Access Key
                const accessKey = "8c93c84e-bab1-46bf-8500-06e7fd5c053c";
                
                const formData = new FormData(this);
                const data = Object.fromEntries(formData.entries());
                data['calculator_results'] = JSON.stringify(state.answers);

                fetch("https://api.web3forms.com/submit", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "Accept": "application/json"
                    },
                    body: JSON.stringify(data)
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        alert("Thank you! Your free checklist is on its way. We'll be in touch soon!");
                        visaLeadForm.reset();
                    } else {
                        alert("Something went wrong. Please try again or contact us directly.");
                    }
                })
                .catch(error => {
                    console.error('Error submitting form:', error);
                    alert("Something went wrong. Please try again or contact us directly.");
                });
            });
        }
        
        // --- Initialize Lucide Icons ---
        lucide.createIcons();
    });
</script>
</body>
</html>